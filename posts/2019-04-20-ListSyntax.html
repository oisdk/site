<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>List Syntax in Agda - Donnacha Oisín Kidney</title>
        <style>body{color:black;font-family:Garamond,Times New Roman,serif;font-size:14px;margin:0px auto 0px auto;padding-left:5px;padding-right:5px;max-width:600px}math{font-size:13px}img{max-width:600px}div#header{border-bottom:3px double black;margin-bottom:30px;padding:12px 0px 12px 0px}div#logo a{color:black;float:left;font-size:20px;text-decoration:none}div#header #navigation{text-align:right}div#header #navigation a{color:black;font-family:Garamond,Times New Roman,Serif;font-size:18px;margin-left:10px;text-decoration:none;text-transform:uppercase}div#footer{font-family:Garamond,Times New Roman,Serif;border-top:solid 2px black;color:#555;font-size:12px;margin-top:30px;padding:12px 0px 12px 0px;text-align:right}h1{font-family:Garamond,Times New Roman,Serif;font-size:22px;font-weight:normal}h2{font-family:Garamond,Times New Roman,Serif;font-size:20px;font-weight:normal}div.info{color:#555;font-size:15px;font-style:italic}span.quiet{color:#828282;font-style:italic}a{color:black;word-wrap:break-word}ul.post-list{margin-left:0px;padding-left:0px;list-style-type:none}.hidden_source{display:none}ol.serieslist{counter-reset:item;list-style-type:none;padding-left:20}ol li.serieslist:before{content:'Part ' counter(item,decimal) ':';counter-increment:item}table.sourceCode,tr.sourceCode,td.lineNumbers,td.sourceCode,table.sourceCode pre{margin:0;padding:0;border:0;vertical-align:baseline;border:none}td.lineNumbers{border-right:1px solid #AAAAAA;text-align:right;color:#AAAAAA;padding-right:5px;padding-left:5px}td.sourceCode{padding-left:5px}.sourceCode,code,.Agda{font-size:10px;font-family:menlo,monospace}.sourceCode span.kw{color:#262C6A}.sourceCode span.dt{color:#476A97}.sourceCode span.dv{color:#262C6A}.sourceCode span.bn{color:#262C6A}.sourceCode span.fl{color:#262C6A}.sourceCode span.ch{color:#262C6A}.sourceCode span.st{color:#702C51}.sourceCode span.co{color:#435138}.sourceCode span.ot{color:#262C6A}.sourceCode span.al{color:red}.sourceCode span.fu{color:#000000}.sourceCode span.re{color:#000000}.sourceCode span.er{color:red}li{margin-bottom:2px}li:last-child{margin-bottom:0px}.Agda .Comment{color:#B22222}.Agda .Background{}.Agda .Markup{color:#000000}.Agda .Keyword{color:#CD6600}.Agda .String{color:#B22222}.Agda .Number{color:#A020F0}.Agda .Symbol{color:#404040}.Agda .PrimitiveType{color:#0000CD}.Agda .Pragma{color:black}.Agda .Operator{}.Agda .Bound{color:black}.Agda .Generalizable{color:black}.Agda .InductiveConstructor{color:#008B00}.Agda .CoinductiveConstructor{color:#8B7500}.Agda .Datatype{color:#0000CD}.Agda .Field{color:#EE1289}.Agda .Function{color:#0000CD}.Agda .Module{color:#A020F0}.Agda .Postulate{color:#0000CD}.Agda .Primitive{color:#0000CD}.Agda .Record{color:#0000CD}.Agda .DottedPattern{}.Agda .UnsolvedMeta{color:black;background:yellow}.Agda .UnsolvedConstraint{color:black;background:yellow}.Agda .TerminationProblem{color:black;background:#FFA07A}.Agda .IncompletePattern{color:black;background:#F5DEB3}.Agda .Error{color:red;text-decoration:underline}.Agda .TypeChecks{color:black;background:#ADD8E6}.Agda a{text-decoration:none}.Agda a[href]:hover{background-color:#B4EEB4}.sourceCode{overflow-x:auto}</style>
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../">Donnacha Oisín Kidney</a>
            </div>
            <div id="navigation">
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <a href="../rss.xml">Feed</a>
            </div>
        </div>

        <div id="content">
            <h2>List Syntax in Agda</h2>

            <div class="info">
    Posted on April 20, 2019
</div>
<div class="info">
    
</div>
<div class="info">
    
        Tags: <a title="All pages tagged 'Agda'." href="../tags/Agda.html">Agda</a>
    
</div>

<p>Just some silly examples of how to get a nice list syntax with mixfix operators in Agda.</p>
<details>
<summary>Intro and Imports</summary>
<pre class="Agda"><a id="169" class="Symbol">{-#</a> <a id="173" class="Keyword">OPTIONS</a> <a id="181" class="Pragma">--without-K</a> <a id="193" class="Pragma">--safe</a> <a id="200" class="Symbol">#-}</a>

<a id="205" class="Keyword">module</a> <a id="212" href="ListSyntax.html" class="Module">ListSyntax</a> <a id="223" class="Keyword">where</a>

<a id="230" class="Keyword">open</a> <a id="235" class="Keyword">import</a> <a id="242" href="https://agda.github.io/agda-stdlib/Data.List.html" class="Module">Data.List</a> <a id="252" class="Symbol">as</a> <a id="255" class="Module">List</a> <a id="260" class="Keyword">using</a> <a id="266" class="Symbol">(</a><a id="267" href="https://agda.github.io/agda-stdlib/Agda.Builtin.List.html#121" class="Datatype">List</a><a id="271" class="Symbol">;</a> <a id="273" href="https://agda.github.io/agda-stdlib/Agda.Builtin.List.html#173" class="InductiveConstructor Operator">_∷_</a><a id="276" class="Symbol">;</a> <a id="278" href="https://agda.github.io/agda-stdlib/Data.List.Base.html#8781" class="InductiveConstructor">[]</a><a id="280" class="Symbol">)</a>
<a id="282" class="Keyword">open</a> <a id="287" class="Keyword">import</a> <a id="294" href="https://agda.github.io/agda-stdlib/Data.Product.html" class="Module">Data.Product</a>
<a id="307" class="Keyword">open</a> <a id="312" class="Keyword">import</a> <a id="319" href="https://agda.github.io/agda-stdlib/Level.html" class="Module">Level</a> <a id="325" class="Keyword">using</a> <a id="331" class="Symbol">(</a><a id="332" href="https://agda.github.io/agda-stdlib/Agda.Primitive.html#657" class="Primitive Operator">_⊔_</a><a id="335" class="Symbol">;</a> <a id="337" href="https://agda.github.io/agda-stdlib/Agda.Primitive.html#408" class="Postulate">Level</a><a id="342" class="Symbol">)</a>
<a id="344" class="Keyword">open</a> <a id="349" class="Keyword">import</a> <a id="356" href="https://agda.github.io/agda-stdlib/Data.Nat.html" class="Module">Data.Nat</a> <a id="365" class="Keyword">using</a> <a id="371" class="Symbol">(</a><a id="372" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a><a id="373" class="Symbol">;</a> <a id="375" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#298" class="Primitive Operator">_+_</a><a id="378" class="Symbol">;</a> <a id="380" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a><a id="383" class="Symbol">;</a> <a id="385" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#183" class="InductiveConstructor">zero</a><a id="389" class="Symbol">)</a>
<a id="391" class="Keyword">open</a> <a id="396" class="Keyword">import</a> <a id="403" href="https://agda.github.io/agda-stdlib/Function.html" class="Module">Function</a>

<a id="413" class="Keyword">variable</a>
  <a id="424" href="ListSyntax.html#424" class="Generalizable">a</a> <a id="426" href="ListSyntax.html#426" class="Generalizable">b</a> <a id="428" class="Symbol">:</a> <a id="430" href="https://agda.github.io/agda-stdlib/Agda.Primitive.html#408" class="Postulate">Level</a>
  <a id="438" href="ListSyntax.html#438" class="Generalizable">A</a> <a id="440" class="Symbol">:</a> <a id="442" class="PrimitiveType">Set</a> <a id="446" href="ListSyntax.html#424" class="Generalizable">a</a>
  <a id="450" href="ListSyntax.html#450" class="Generalizable">B</a> <a id="452" class="Symbol">:</a> <a id="454" class="PrimitiveType">Set</a> <a id="458" href="ListSyntax.html#426" class="Generalizable">b</a>
</pre>
</details>
<h1 id="approach-1">Approach 1:</h1>
<p>With instance search.</p>
<pre class="Agda"><a id="522" class="Keyword">module</a> <a id="Instance"></a><a id="529" href="ListSyntax.html#529" class="Module">Instance</a> <a id="538" class="Keyword">where</a>
  <a id="546" class="Keyword">record</a> <a id="Instance.ListSyntax"></a><a id="553" href="ListSyntax.html#553" class="Record">ListSyntax</a> <a id="564" class="Symbol">{</a><a id="565" href="ListSyntax.html#565" class="Bound">a</a> <a id="567" href="ListSyntax.html#567" class="Bound">b</a><a id="568" class="Symbol">}</a> <a id="570" class="Symbol">(</a><a id="571" href="ListSyntax.html#571" class="Bound">A</a> <a id="573" class="Symbol">:</a> <a id="575" class="PrimitiveType">Set</a> <a id="579" href="ListSyntax.html#565" class="Bound">a</a><a id="580" class="Symbol">)</a> <a id="582" class="Symbol">(</a><a id="583" href="ListSyntax.html#583" class="Bound">B</a> <a id="585" class="Symbol">:</a> <a id="587" class="PrimitiveType">Set</a> <a id="591" href="ListSyntax.html#567" class="Bound">b</a><a id="592" class="Symbol">)</a> <a id="594" class="Symbol">:</a> <a id="596" class="PrimitiveType">Set</a> <a id="600" class="Symbol">(</a><a id="601" href="ListSyntax.html#565" class="Bound">a</a> <a id="603" href="https://agda.github.io/agda-stdlib/Agda.Primitive.html#657" class="Primitive Operator">⊔</a> <a id="605" href="ListSyntax.html#567" class="Bound">b</a><a id="606" class="Symbol">)</a> <a id="608" class="Keyword">where</a>
    <a id="618" class="Keyword">field</a> <a id="Instance.ListSyntax.[_]"></a><a id="624" href="ListSyntax.html#624" class="Field Operator">[_]</a> <a id="628" class="Symbol">:</a> <a id="630" href="ListSyntax.html#583" class="Bound">B</a> <a id="632" class="Symbol">→</a> <a id="634" href="https://agda.github.io/agda-stdlib/Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="639" href="ListSyntax.html#571" class="Bound">A</a>

  <a id="644" class="Keyword">open</a> <a id="649" href="ListSyntax.html#553" class="Module">ListSyntax</a> <a id="660" class="Symbol">⦃</a> <a id="662" class="Symbol">...</a> <a id="666" class="Symbol">⦄</a> <a id="668" class="Keyword">public</a>

  <a id="678" class="Keyword">instance</a>
    <a id="Instance.cons"></a><a id="691" href="ListSyntax.html#691" class="Function">cons</a> <a id="696" class="Symbol">:</a> <a id="698" class="Symbol">∀</a> <a id="700" class="Symbol">{</a><a id="701" href="ListSyntax.html#701" class="Bound">a</a> <a id="703" href="ListSyntax.html#703" class="Bound">b</a><a id="704" class="Symbol">}</a> <a id="706" class="Symbol">{</a><a id="707" href="ListSyntax.html#707" class="Bound">A</a> <a id="709" class="Symbol">:</a> <a id="711" class="PrimitiveType">Set</a> <a id="715" href="ListSyntax.html#701" class="Bound">a</a><a id="716" class="Symbol">}</a> <a id="718" class="Symbol">{</a><a id="719" href="ListSyntax.html#719" class="Bound">B</a> <a id="721" class="Symbol">:</a> <a id="723" class="PrimitiveType">Set</a> <a id="727" href="ListSyntax.html#703" class="Bound">b</a><a id="728" class="Symbol">}</a> <a id="730" class="Symbol">⦃</a> <a id="732" href="ListSyntax.html#732" class="Bound">_</a> <a id="734" class="Symbol">:</a> <a id="736" href="ListSyntax.html#553" class="Record">ListSyntax</a> <a id="747" href="ListSyntax.html#707" class="Bound">A</a> <a id="749" href="ListSyntax.html#719" class="Bound">B</a> <a id="751" class="Symbol">⦄</a>
         <a id="762" class="Symbol">→</a>  <a id="765" href="ListSyntax.html#553" class="Record">ListSyntax</a> <a id="776" href="ListSyntax.html#707" class="Bound">A</a> <a id="778" class="Symbol">(</a><a id="779" href="ListSyntax.html#707" class="Bound">A</a> <a id="781" href="https://agda.github.io/agda-stdlib/Data.Product.html#1162" class="Function Operator">×</a> <a id="783" href="ListSyntax.html#719" class="Bound">B</a><a id="784" class="Symbol">)</a>
    <a id="790" href="ListSyntax.html#624" class="Field Operator">[_]</a> <a id="794" class="Symbol">⦃</a> <a id="796" href="ListSyntax.html#691" class="Function">cons</a> <a id="801" class="Symbol">⦄</a> <a id="803" class="Symbol">(</a><a id="804" href="ListSyntax.html#804" class="Bound">x</a> <a id="806" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="808" href="ListSyntax.html#808" class="Bound">xs</a><a id="810" class="Symbol">)</a> <a id="812" class="Symbol">=</a> <a id="814" href="ListSyntax.html#804" class="Bound">x</a> <a id="816" href="https://agda.github.io/agda-stdlib/Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="818" href="ListSyntax.html#624" class="Field Operator">[</a> <a id="820" href="ListSyntax.html#808" class="Bound">xs</a> <a id="823" href="ListSyntax.html#624" class="Field Operator">]</a>

  <a id="828" class="Keyword">instance</a>
    <a id="Instance.sing"></a><a id="841" href="ListSyntax.html#841" class="Function">sing</a> <a id="846" class="Symbol">:</a> <a id="848" class="Symbol">∀</a> <a id="850" class="Symbol">{</a><a id="851" href="ListSyntax.html#851" class="Bound">a</a><a id="852" class="Symbol">}</a> <a id="854" class="Symbol">{</a><a id="855" href="ListSyntax.html#855" class="Bound">A</a> <a id="857" class="Symbol">:</a> <a id="859" class="PrimitiveType">Set</a> <a id="863" href="ListSyntax.html#851" class="Bound">a</a><a id="864" class="Symbol">}</a> <a id="866" class="Symbol">→</a> <a id="868" href="ListSyntax.html#553" class="Record">ListSyntax</a> <a id="879" href="ListSyntax.html#855" class="Bound">A</a> <a id="881" href="ListSyntax.html#855" class="Bound">A</a>
    <a id="887" href="ListSyntax.html#624" class="Field Operator">[_]</a> <a id="891" class="Symbol">⦃</a> <a id="893" href="ListSyntax.html#841" class="Function">sing</a> <a id="898" class="Symbol">⦄</a> <a id="900" class="Symbol">=</a> <a id="902" href="https://agda.github.io/agda-stdlib/Agda.Builtin.List.html#173" class="InductiveConstructor Operator">_∷</a> <a id="905" href="https://agda.github.io/agda-stdlib/Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a>
</pre>
<h2 id="advantages">Advantages:</h2>
No type annotation needed for singleton list.
<pre class="Agda"><a id="983" class="Comment">--_ : List ℕ ← not needed</a>
  <a id="1011" href="ListSyntax.html#1011" class="Function">_</a> <a id="1013" class="Symbol">=</a> <a id="1015" href="ListSyntax.html#624" class="Field Operator">[</a> <a id="1017" class="Number">1</a> <a id="1019" href="ListSyntax.html#624" class="Field Operator">]</a>
</pre>
It can even work as a standalone function:
<pre class="Agda">  <a id="1078" href="ListSyntax.html#1078" class="Function">_</a> <a id="1080" class="Symbol">:</a> <a id="1082" href="https://agda.github.io/agda-stdlib/Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="1087" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a> <a id="1089" class="Symbol">→</a> <a id="1091" class="Symbol">_</a>
  <a id="1095" class="Symbol">_</a> <a id="1097" class="Symbol">=</a> <a id="1099" href="https://agda.github.io/agda-stdlib/Data.List.Base.html#1299" class="Function">List.map</a> <a id="1108" href="ListSyntax.html#624" class="Field Operator">[_]</a>
</pre>
It uses a closed operator, so we don’t need parentheses to parse it:
<pre class="Agda">  <a id="1195" href="ListSyntax.html#1195" class="Function">_</a> <a id="1197" class="Symbol">=</a> <a id="1199" href="https://agda.github.io/agda-stdlib/Data.List.Base.html#3427" class="Function">List.foldr</a> <a id="1210" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#298" class="Primitive Operator">_+_</a> <a id="1214" class="Number">0</a> <a id="1216" href="ListSyntax.html#624" class="Field Operator">[</a> <a id="1218" class="Number">1</a> <a id="1220" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1222" class="Number">2</a> <a id="1224" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1226" class="Number">3</a> <a id="1228" href="ListSyntax.html#624" class="Field Operator">]</a>
</pre>
And it doesn’t clash with product:
<pre class="Agda">  <a id="1275" href="ListSyntax.html#1275" class="Function">_</a> <a id="1277" class="Symbol">:</a> <a id="1279" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a> <a id="1281" href="https://agda.github.io/agda-stdlib/Data.Product.html#1162" class="Function Operator">×</a> <a id="1283" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a>
  <a id="1287" class="Symbol">_</a> <a id="1289" class="Symbol">=</a> <a id="1291" class="Number">1</a> <a id="1293" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1295" class="Number">2</a>
</pre>
It allows nesting:
<pre class="Agda">  <a id="1330" href="ListSyntax.html#1330" class="Function">_</a> <a id="1332" class="Symbol">:</a> <a id="1334" href="https://agda.github.io/agda-stdlib/Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="1339" class="Symbol">(</a><a id="1340" href="https://agda.github.io/agda-stdlib/Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="1345" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a><a id="1346" class="Symbol">)</a>
  <a id="1350" class="Symbol">_</a> <a id="1352" class="Symbol">=</a> <a id="1354" href="ListSyntax.html#624" class="Field Operator">[</a> <a id="1356" href="ListSyntax.html#624" class="Field Operator">[</a> <a id="1358" class="Number">1</a> <a id="1360" href="ListSyntax.html#624" class="Field Operator">]</a> <a id="1362" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1364" href="ListSyntax.html#624" class="Field Operator">[</a> <a id="1366" class="Number">2</a> <a id="1368" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1370" class="Number">3</a> <a id="1372" href="ListSyntax.html#624" class="Field Operator">]</a> <a id="1374" href="ListSyntax.html#624" class="Field Operator">]</a>
</pre>
<h2 id="disadvantages">Disadvantages</h2>
However, it needs type annotations when there is more than one item in the list and there’s no other way to guess the items.
<pre class="Agda">  <a id="1533" href="ListSyntax.html#1533" class="Function">_</a> <a id="1535" class="Symbol">:</a> <a id="1537" href="https://agda.github.io/agda-stdlib/Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="1542" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a>
  <a id="1546" class="Symbol">_</a> <a id="1548" class="Symbol">=</a> <a id="1550" href="ListSyntax.html#624" class="Field Operator">[</a> <a id="1552" class="Number">1</a> <a id="1554" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1556" class="Number">2</a> <a id="1558" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="1560" class="Number">3</a> <a id="1562" href="ListSyntax.html#624" class="Field Operator">]</a>
</pre>
<h1 id="approach-2-with-a-datatype">Approach 2: With a Datatype</h1>
<pre class="Agda"><a id="1608" class="Keyword">module</a> <a id="DataType"></a><a id="1615" href="ListSyntax.html#1615" class="Module">DataType</a> <a id="1624" class="Keyword">where</a>
  <a id="1632" class="Keyword">infixr</a> <a id="1639" class="Number">5</a> <a id="1641" href="ListSyntax.html#1741" class="InductiveConstructor Operator">_]</a>
  <a id="1646" class="Keyword">data</a> <a id="DataType.ListBuilder"></a><a id="1651" href="ListSyntax.html#1651" class="Datatype">ListBuilder</a> <a id="1663" class="Symbol">{</a><a id="1664" href="ListSyntax.html#1664" class="Bound">a</a><a id="1665" class="Symbol">}</a> <a id="1667" class="Symbol">(</a><a id="1668" href="ListSyntax.html#1668" class="Bound">A</a> <a id="1670" class="Symbol">:</a> <a id="1672" class="PrimitiveType">Set</a> <a id="1676" href="ListSyntax.html#1664" class="Bound">a</a><a id="1677" class="Symbol">)</a> <a id="1679" class="Symbol">:</a> <a id="1681" class="PrimitiveType">Set</a> <a id="1685" href="ListSyntax.html#1664" class="Bound">a</a> <a id="1687" class="Keyword">where</a>
    <a id="DataType.ListBuilder._,_"></a><a id="1697" href="ListSyntax.html#1697" class="InductiveConstructor Operator">_,_</a> <a id="1701" class="Symbol">:</a> <a id="1703" href="ListSyntax.html#1668" class="Bound">A</a> <a id="1705" class="Symbol">→</a> <a id="1707" href="ListSyntax.html#1651" class="Datatype">ListBuilder</a> <a id="1719" href="ListSyntax.html#1668" class="Bound">A</a> <a id="1721" class="Symbol">→</a> <a id="1723" href="ListSyntax.html#1651" class="Datatype">ListBuilder</a> <a id="1735" href="ListSyntax.html#1668" class="Bound">A</a>
    <a id="DataType.ListBuilder._]"></a><a id="1741" href="ListSyntax.html#1741" class="InductiveConstructor Operator">_]</a> <a id="1744" class="Symbol">:</a> <a id="1746" href="ListSyntax.html#1668" class="Bound">A</a> <a id="1748" class="Symbol">→</a> <a id="1750" href="ListSyntax.html#1651" class="Datatype">ListBuilder</a> <a id="1762" href="ListSyntax.html#1668" class="Bound">A</a>

  <a id="1767" class="Keyword">infixr</a> <a id="1774" class="Number">4</a> <a id="1776" href="ListSyntax.html#1781" class="Function Operator">[_</a>
  <a id="DataType.[_"></a><a id="1781" href="ListSyntax.html#1781" class="Function Operator">[_</a> <a id="1784" class="Symbol">:</a> <a id="1786" href="ListSyntax.html#1651" class="Datatype">ListBuilder</a> <a id="1798" href="ListSyntax.html#438" class="Generalizable">A</a> <a id="1800" class="Symbol">→</a> <a id="1802" href="https://agda.github.io/agda-stdlib/Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="1807" href="ListSyntax.html#438" class="Generalizable">A</a>
  <a id="1811" href="ListSyntax.html#1781" class="Function Operator">[</a> <a id="1813" href="ListSyntax.html#1813" class="Bound">x</a> <a id="1815" href="ListSyntax.html#1697" class="InductiveConstructor Operator">,</a> <a id="1817" href="ListSyntax.html#1817" class="Bound">xs</a> <a id="1820" class="Symbol">=</a> <a id="1822" href="ListSyntax.html#1813" class="Bound">x</a> <a id="1824" href="https://agda.github.io/agda-stdlib/Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="1826" class="Symbol">(</a><a id="1827" href="ListSyntax.html#1781" class="Function Operator">[</a> <a id="1829" href="ListSyntax.html#1817" class="Bound">xs</a><a id="1831" class="Symbol">)</a>
  <a id="1835" href="ListSyntax.html#1781" class="Function Operator">[</a> <a id="1837" href="ListSyntax.html#1837" class="Bound">x</a> <a id="1839" href="ListSyntax.html#1741" class="InductiveConstructor Operator">]</a> <a id="1841" class="Symbol">=</a> <a id="1843" href="ListSyntax.html#1837" class="Bound">x</a> <a id="1845" href="https://agda.github.io/agda-stdlib/Agda.Builtin.List.html#173" class="InductiveConstructor Operator">∷</a> <a id="1847" href="https://agda.github.io/agda-stdlib/Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a>
</pre>
<h2 id="advantages-1">Advantages:</h2>
Single and multi-item lists without type annotation:
<pre class="Agda"><a id="1930" class="Comment">--_ : List ℕ ← not needed</a>
  <a id="1958" href="ListSyntax.html#1958" class="Function">_</a> <a id="1960" class="Symbol">=</a> <a id="1962" href="ListSyntax.html#1781" class="Function Operator">[</a> <a id="1964" class="Number">1</a> <a id="1966" href="ListSyntax.html#1697" class="InductiveConstructor Operator">,</a> <a id="1968" class="Number">2</a> <a id="1970" href="ListSyntax.html#1697" class="InductiveConstructor Operator">,</a> <a id="1972" class="Number">3</a> <a id="1974" href="ListSyntax.html#1741" class="InductiveConstructor Operator">]</a>

<a id="1977" class="Comment">--_ : List ℕ ← not needed</a>
  <a id="2005" href="ListSyntax.html#2005" class="Function">_</a> <a id="2007" class="Symbol">=</a> <a id="2009" href="ListSyntax.html#1781" class="Function Operator">[</a> <a id="2011" class="Number">1</a> <a id="2013" href="ListSyntax.html#1741" class="InductiveConstructor Operator">]</a>
</pre>
<p>Doesn’t clash with product:</p>
<pre class="Agda">  <a id="2058" href="ListSyntax.html#2058" class="Function">_</a> <a id="2060" class="Symbol">:</a> <a id="2062" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a> <a id="2064" href="https://agda.github.io/agda-stdlib/Data.Product.html#1162" class="Function Operator">×</a> <a id="2066" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a>
  <a id="2070" class="Symbol">_</a> <a id="2072" class="Symbol">=</a> <a id="2074" class="Number">1</a> <a id="2076" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="2078" class="Number">2</a>
</pre>
Can choose different “list-like” type based on first bracket:
<pre class="Agda">  <a id="2156" class="Keyword">open</a> <a id="2161" class="Keyword">import</a> <a id="2168" href="https://agda.github.io/agda-stdlib/Data.Vec.html" class="Module">Data.Vec</a> <a id="2177" class="Symbol">as</a> <a id="2180" class="Module">Vec</a> <a id="2184" class="Keyword">using</a> <a id="2190" class="Symbol">(</a><a id="2191" href="https://agda.github.io/agda-stdlib/Data.Vec.html#942" class="InductiveConstructor Operator">_∷_</a><a id="2194" class="Symbol">;</a> <a id="2196" href="https://agda.github.io/agda-stdlib/Data.Vec.html#923" class="InductiveConstructor">[]</a><a id="2198" class="Symbol">;</a> <a id="2200" href="https://agda.github.io/agda-stdlib/Data.Vec.html#887" class="Datatype">Vec</a><a id="2203" class="Symbol">)</a>

  <a id="DataType.len-1"></a><a id="2208" href="ListSyntax.html#2208" class="Function">len-1</a> <a id="2214" class="Symbol">:</a> <a id="2216" href="ListSyntax.html#1651" class="Datatype">ListBuilder</a> <a id="2228" href="ListSyntax.html#438" class="Generalizable">A</a> <a id="2230" class="Symbol">→</a> <a id="2232" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a>
  <a id="2236" href="ListSyntax.html#2208" class="Function">len-1</a> <a id="2242" class="Symbol">(</a><a id="2243" href="ListSyntax.html#2243" class="Bound">x</a> <a id="2245" href="ListSyntax.html#1697" class="InductiveConstructor Operator">,</a> <a id="2247" href="ListSyntax.html#2247" class="Bound">xs</a><a id="2249" class="Symbol">)</a> <a id="2251" class="Symbol">=</a> <a id="2253" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="2257" class="Symbol">(</a><a id="2258" href="ListSyntax.html#2208" class="Function">len-1</a> <a id="2264" href="ListSyntax.html#2247" class="Bound">xs</a><a id="2266" class="Symbol">)</a>
  <a id="2270" href="ListSyntax.html#2208" class="Function">len-1</a> <a id="2276" class="Symbol">(</a><a id="2277" href="ListSyntax.html#2277" class="Bound">x</a> <a id="2279" href="ListSyntax.html#1741" class="InductiveConstructor Operator">]</a><a id="2280" class="Symbol">)</a> <a id="2282" class="Symbol">=</a> <a id="2284" class="Number">0</a>

  <a id="2289" class="Keyword">infixr</a> <a id="2296" class="Number">4</a> <a id="2298" href="ListSyntax.html#2304" class="Function Operator">v[_</a>
  <a id="DataType.v[_"></a><a id="2304" href="ListSyntax.html#2304" class="Function Operator">v[_</a> <a id="2308" class="Symbol">:</a> <a id="2310" class="Symbol">(</a><a id="2311" href="ListSyntax.html#2311" class="Bound">xs</a> <a id="2314" class="Symbol">:</a> <a id="2316" href="ListSyntax.html#1651" class="Datatype">ListBuilder</a> <a id="2328" href="ListSyntax.html#438" class="Generalizable">A</a><a id="2329" class="Symbol">)</a> <a id="2331" class="Symbol">→</a> <a id="2333" href="https://agda.github.io/agda-stdlib/Data.Vec.html#887" class="Datatype">Vec</a> <a id="2337" href="ListSyntax.html#438" class="Generalizable">A</a> <a id="2339" class="Symbol">(</a><a id="2340" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#196" class="InductiveConstructor">suc</a> <a id="2344" class="Symbol">(</a><a id="2345" href="ListSyntax.html#2208" class="Function">len-1</a> <a id="2351" href="ListSyntax.html#2311" class="Bound">xs</a><a id="2353" class="Symbol">))</a>
  <a id="2358" href="ListSyntax.html#2304" class="Function Operator">v[</a> <a id="2361" class="Symbol">(</a><a id="2362" href="ListSyntax.html#2362" class="Bound">x</a> <a id="2364" href="ListSyntax.html#1697" class="InductiveConstructor Operator">,</a> <a id="2366" href="ListSyntax.html#2366" class="Bound">xs</a><a id="2368" class="Symbol">)</a> <a id="2370" class="Symbol">=</a> <a id="2372" href="ListSyntax.html#2362" class="Bound">x</a> <a id="2374" href="https://agda.github.io/agda-stdlib/Data.Vec.html#942" class="InductiveConstructor Operator">∷</a> <a id="2376" class="Symbol">(</a><a id="2377" href="ListSyntax.html#2304" class="Function Operator">v[</a> <a id="2380" href="ListSyntax.html#2366" class="Bound">xs</a><a id="2382" class="Symbol">)</a>
  <a id="2386" href="ListSyntax.html#2304" class="Function Operator">v[</a> <a id="2389" href="ListSyntax.html#2389" class="Bound">x</a> <a id="2391" href="ListSyntax.html#1741" class="InductiveConstructor Operator">]</a> <a id="2393" class="Symbol">=</a> <a id="2395" href="ListSyntax.html#2389" class="Bound">x</a> <a id="2397" href="https://agda.github.io/agda-stdlib/Data.Vec.html#942" class="InductiveConstructor Operator">∷</a> <a id="2399" href="https://agda.github.io/agda-stdlib/Data.Vec.html#923" class="InductiveConstructor">[]</a>

  <a id="2405" href="ListSyntax.html#2405" class="Function">_</a> <a id="2407" class="Symbol">:</a> <a id="2409" href="https://agda.github.io/agda-stdlib/Data.Vec.html#887" class="Datatype">Vec</a> <a id="2413" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#165" class="Datatype">ℕ</a> <a id="2415" class="Number">3</a>
  <a id="2419" class="Symbol">_</a> <a id="2421" class="Symbol">=</a> <a id="2423" href="ListSyntax.html#2304" class="Function Operator">v[</a> <a id="2426" class="Number">1</a> <a id="2428" href="ListSyntax.html#1697" class="InductiveConstructor Operator">,</a> <a id="2430" class="Number">2</a> <a id="2432" href="ListSyntax.html#1697" class="InductiveConstructor Operator">,</a> <a id="2434" class="Number">3</a> <a id="2436" href="ListSyntax.html#1741" class="InductiveConstructor Operator">]</a>
</pre>
<h2 id="disadvantages-1">Disadvantages</h2>
<p>Not a closed operator, so need parens:</p>
<pre class="Agda">  <a id="2510" href="ListSyntax.html#2510" class="Function">_</a> <a id="2512" class="Symbol">=</a> <a id="2514" href="https://agda.github.io/agda-stdlib/Data.List.Base.html#3427" class="Function">List.foldr</a> <a id="2525" href="https://agda.github.io/agda-stdlib/Agda.Builtin.Nat.html#298" class="Primitive Operator">_+_</a> <a id="2529" class="Number">0</a> <a id="2531" class="Symbol">(</a><a id="2532" href="ListSyntax.html#1781" class="Function Operator">[</a> <a id="2534" class="Number">1</a> <a id="2536" href="ListSyntax.html#1697" class="InductiveConstructor Operator">,</a> <a id="2538" class="Number">2</a> <a id="2540" href="ListSyntax.html#1697" class="InductiveConstructor Operator">,</a> <a id="2542" class="Number">3</a> <a id="2544" href="ListSyntax.html#1741" class="InductiveConstructor Operator">]</a><a id="2545" class="Symbol">)</a>
</pre>
Singleton isn’t a function
<pre class="Agda"><a id="2586" class="Comment">--_ = [_]</a>
</pre>
Doesn’t nest
<pre class="Agda"><a id="2622" class="Comment">--_ = [ [ 1 ] , [ 2 , 3 ] ]</a>
</pre>

        </div>
        <div id="footer">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
