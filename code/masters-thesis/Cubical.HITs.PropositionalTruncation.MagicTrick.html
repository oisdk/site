<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Cubical.HITs.PropositionalTruncation.MagicTrick</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">{-

Based on Nicolai Kraus&#39; blog post:
  The Truncation Map |_| : ℕ -&gt; ‖ℕ‖ is nearly Invertible
  https://homotopytypetheory.org/2013/10/28/the-truncation-map-_-ℕ-‖ℕ‖-is-nearly-invertible/

Defines [recover], which definitionally satisfies `recover ∣ x ∣ ≡ x` ([recover∣∣]) for homogeneous types

Also see the follow-up post by Jason Gross:
  Composition is not what you think it is! Why “nearly invertible” isn’t.
  https://homotopytypetheory.org/2014/02/24/composition-is-not-what-you-think-it-is-why-nearly-invertible-isnt/

-}</a>
<a id="532" class="Symbol">{-#</a> <a id="536" class="Keyword">OPTIONS</a> <a id="544" class="Pragma">--cubical</a> <a id="554" class="Pragma">--safe</a> <a id="561" class="Symbol">#-}</a>

<a id="566" class="Keyword">module</a> <a id="573" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html" class="Module">Cubical.HITs.PropositionalTruncation.MagicTrick</a> <a id="621" class="Keyword">where</a>

<a id="628" class="Keyword">open</a> <a id="633" class="Keyword">import</a> <a id="640" href="Cubical.Foundations.Prelude.html" class="Module">Cubical.Foundations.Prelude</a>
<a id="668" class="Keyword">open</a> <a id="673" class="Keyword">import</a> <a id="680" href="Cubical.Foundations.Function.html" class="Module">Cubical.Foundations.Function</a>
<a id="709" class="Keyword">open</a> <a id="714" class="Keyword">import</a> <a id="721" href="Cubical.Foundations.Path.html" class="Module">Cubical.Foundations.Path</a>
<a id="746" class="Keyword">open</a> <a id="751" class="Keyword">import</a> <a id="758" href="Cubical.Foundations.Pointed.html" class="Module">Cubical.Foundations.Pointed</a>
<a id="786" class="Keyword">open</a> <a id="791" class="Keyword">import</a> <a id="798" href="Cubical.Foundations.Pointed.Homogeneous.html" class="Module">Cubical.Foundations.Pointed.Homogeneous</a>

<a id="839" class="Keyword">open</a> <a id="844" class="Keyword">import</a> <a id="851" href="Cubical.HITs.PropositionalTruncation.Base.html" class="Module">Cubical.HITs.PropositionalTruncation.Base</a>
<a id="893" class="Keyword">open</a> <a id="898" class="Keyword">import</a> <a id="905" href="Cubical.HITs.PropositionalTruncation.Properties.html" class="Module">Cubical.HITs.PropositionalTruncation.Properties</a>

<a id="954" class="Keyword">module</a> <a id="Recover"></a><a id="961" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#961" class="Module">Recover</a> <a id="969" class="Symbol">{</a><a id="970" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#970" class="Bound">ℓ</a><a id="971" class="Symbol">}</a> <a id="973" class="Symbol">(</a><a id="974" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#974" class="Bound">A∙</a> <a id="977" class="Symbol">:</a> <a id="979" href="Cubical.Foundations.Pointed.Base.html#122" class="Function">Pointed</a> <a id="987" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#970" class="Bound">ℓ</a><a id="988" class="Symbol">)</a> <a id="990" class="Symbol">(</a><a id="991" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#991" class="Bound">h</a> <a id="993" class="Symbol">:</a> <a id="995" href="Cubical.Foundations.Pointed.Homogeneous.html#775" class="Function">isHomogeneous</a> <a id="1009" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#974" class="Bound">A∙</a><a id="1011" class="Symbol">)</a> <a id="1013" class="Keyword">where</a>
  <a id="1021" class="Keyword">private</a>
    <a id="Recover.A"></a><a id="1033" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1033" class="Function">A</a> <a id="1035" class="Symbol">=</a> <a id="1037" href="Cubical.Foundations.Pointed.Base.html#192" class="Function">typ</a> <a id="1041" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#974" class="Bound">A∙</a>
    <a id="Recover.a"></a><a id="1048" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1048" class="Function">a</a> <a id="1050" class="Symbol">=</a> <a id="1052" href="Cubical.Foundations.Pointed.Base.html#241" class="Function">pt</a> <a id="1055" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#974" class="Bound">A∙</a>

  <a id="Recover.toEquivPtd"></a><a id="1061" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1061" class="Function">toEquivPtd</a> <a id="1072" class="Symbol">:</a> <a id="1074" href="Cubical.HITs.PropositionalTruncation.Base.html#259" class="Datatype Operator">∥</a> <a id="1076" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1033" class="Function">A</a> <a id="1078" href="Cubical.HITs.PropositionalTruncation.Base.html#259" class="Datatype Operator">∥</a> <a id="1080" class="Symbol">→</a> <a id="1082" href="Cubical.Core.Primitives.html#5705" class="Function">Σ[</a> <a id="1085" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1085" class="Bound">B∙</a> <a id="1088" href="Cubical.Core.Primitives.html#5705" class="Function">∈</a> <a id="1090" href="Cubical.Foundations.Pointed.Base.html#122" class="Function">Pointed</a> <a id="1098" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#970" class="Bound">ℓ</a> <a id="1100" href="Cubical.Core.Primitives.html#5705" class="Function">]</a> <a id="1102" class="Symbol">(</a><a id="1103" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1033" class="Function">A</a> <a id="1105" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1107" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1048" class="Function">a</a><a id="1108" class="Symbol">)</a> <a id="1110" href="Agda.Builtin.Cubical.Path.html#381" class="Function Operator">≡</a> <a id="1112" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1085" class="Bound">B∙</a>
  <a id="1117" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1061" class="Function">toEquivPtd</a> <a id="1128" class="Symbol">=</a> <a id="1130" href="Cubical.HITs.PropositionalTruncation.Properties.html#514" class="Function">recPropTrunc</a> <a id="1143" class="Symbol">(</a><a id="1144" href="Cubical.Foundations.Prelude.html#7994" class="Function">isContr→isProp</a> <a id="1159" class="Symbol">(_</a> <a id="1162" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1164" class="Symbol">λ</a> <a id="1166" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1166" class="Bound">p</a> <a id="1168" class="Symbol">→</a> <a id="1170" href="Cubical.Foundations.Prelude.html#4848" class="Function">contrSingl</a> <a id="1181" class="Symbol">(</a><a id="1182" href="Agda.Builtin.Sigma.html#264" class="Field">snd</a> <a id="1186" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1166" class="Bound">p</a><a id="1187" class="Symbol">)))</a>
                            <a id="1219" class="Symbol">(λ</a> <a id="1222" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1222" class="Bound">x</a> <a id="1224" class="Symbol">→</a> <a id="1226" class="Symbol">(</a><a id="1227" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1033" class="Function">A</a> <a id="1229" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1231" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1222" class="Bound">x</a><a id="1232" class="Symbol">)</a> <a id="1234" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1236" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#991" class="Bound">h</a> <a id="1238" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1222" class="Bound">x</a><a id="1239" class="Symbol">)</a>
  <a id="1243" class="Keyword">private</a>
    <a id="Recover.B∙"></a><a id="1255" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1255" class="Function">B∙</a> <a id="1258" class="Symbol">:</a> <a id="1260" href="Cubical.HITs.PropositionalTruncation.Base.html#259" class="Datatype Operator">∥</a> <a id="1262" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1033" class="Function">A</a> <a id="1264" href="Cubical.HITs.PropositionalTruncation.Base.html#259" class="Datatype Operator">∥</a> <a id="1266" class="Symbol">→</a> <a id="1268" href="Cubical.Foundations.Pointed.Base.html#122" class="Function">Pointed</a> <a id="1276" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#970" class="Bound">ℓ</a>
    <a id="1282" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1255" class="Function">B∙</a> <a id="1285" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1285" class="Bound">tx</a> <a id="1288" class="Symbol">=</a> <a id="1290" href="Agda.Builtin.Sigma.html#252" class="Field">fst</a> <a id="1294" class="Symbol">(</a><a id="1295" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1061" class="Function">toEquivPtd</a> <a id="1306" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1285" class="Bound">tx</a><a id="1308" class="Symbol">)</a>

  <a id="1313" class="Comment">-- the key observation is that B∙ ∣ x ∣ is definitionally equal to (A , x)</a>
  <a id="1390" class="Keyword">private</a>
    <a id="Recover.obvs"></a><a id="1402" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1402" class="Function">obvs</a> <a id="1407" class="Symbol">:</a> <a id="1409" class="Symbol">∀</a> <a id="1411" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1411" class="Bound">x</a> <a id="1413" class="Symbol">→</a> <a id="1415" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1255" class="Function">B∙</a> <a id="1418" href="Cubical.HITs.PropositionalTruncation.Base.html#297" class="InductiveConstructor Operator">∣</a> <a id="1420" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1411" class="Bound">x</a> <a id="1422" href="Cubical.HITs.PropositionalTruncation.Base.html#297" class="InductiveConstructor Operator">∣</a> <a id="1424" href="Agda.Builtin.Cubical.Path.html#381" class="Function Operator">≡</a> <a id="1426" class="Symbol">(</a><a id="1427" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1033" class="Function">A</a> <a id="1429" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1431" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1411" class="Bound">x</a><a id="1432" class="Symbol">)</a>
    <a id="1438" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1402" class="Function">obvs</a> <a id="1443" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1443" class="Bound">x</a> <a id="1445" class="Symbol">=</a> <a id="1447" href="Cubical.Foundations.Prelude.html#856" class="Function">refl</a> <a id="1452" class="Comment">-- try it: `C-c C-n B∙ ∣ x ∣` gives `(A , x)`</a>

  <a id="1501" class="Comment">-- thus any truncated element (of a homogeneous type) can be recovered by agda&#39;s normalizer!</a>

  <a id="Recover.recover"></a><a id="1597" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1597" class="Function">recover</a> <a id="1605" class="Symbol">:</a> <a id="1607" class="Symbol">∀</a> <a id="1609" class="Symbol">(</a><a id="1610" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1610" class="Bound">tx</a> <a id="1613" class="Symbol">:</a> <a id="1615" href="Cubical.HITs.PropositionalTruncation.Base.html#259" class="Datatype Operator">∥</a> <a id="1617" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1033" class="Function">A</a> <a id="1619" href="Cubical.HITs.PropositionalTruncation.Base.html#259" class="Datatype Operator">∥</a><a id="1620" class="Symbol">)</a> <a id="1622" class="Symbol">→</a> <a id="1624" href="Cubical.Foundations.Pointed.Base.html#192" class="Function">typ</a> <a id="1628" class="Symbol">(</a><a id="1629" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1255" class="Function">B∙</a> <a id="1632" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1610" class="Bound">tx</a><a id="1634" class="Symbol">)</a>
  <a id="1638" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1597" class="Function">recover</a> <a id="1646" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1646" class="Bound">tx</a> <a id="1649" class="Symbol">=</a> <a id="1651" href="Cubical.Foundations.Pointed.Base.html#241" class="Function">pt</a> <a id="1654" class="Symbol">(</a><a id="1655" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1255" class="Function">B∙</a> <a id="1658" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1646" class="Bound">tx</a><a id="1660" class="Symbol">)</a>

  <a id="Recover.recover∣∣"></a><a id="1665" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1665" class="Function">recover∣∣</a> <a id="1675" class="Symbol">:</a> <a id="1677" class="Symbol">∀</a> <a id="1679" class="Symbol">(</a><a id="1680" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1680" class="Bound">x</a> <a id="1682" class="Symbol">:</a> <a id="1684" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1033" class="Function">A</a><a id="1685" class="Symbol">)</a> <a id="1687" class="Symbol">→</a> <a id="1689" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1597" class="Function">recover</a> <a id="1697" href="Cubical.HITs.PropositionalTruncation.Base.html#297" class="InductiveConstructor Operator">∣</a> <a id="1699" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1680" class="Bound">x</a> <a id="1701" href="Cubical.HITs.PropositionalTruncation.Base.html#297" class="InductiveConstructor Operator">∣</a> <a id="1703" href="Agda.Builtin.Cubical.Path.html#381" class="Function Operator">≡</a> <a id="1705" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1680" class="Bound">x</a>
  <a id="1709" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1665" class="Function">recover∣∣</a> <a id="1719" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1719" class="Bound">x</a> <a id="1721" class="Symbol">=</a> <a id="1723" href="Cubical.Foundations.Prelude.html#856" class="Function">refl</a> <a id="1728" class="Comment">-- try it: `C-c C-n recover ∣ x ∣` gives `x`</a>

  <a id="1776" class="Keyword">private</a>
    <a id="1788" class="Comment">-- notice that the following typechecks because typ (B∙ ∣ x ∣) is definitionally equal to to A, but</a>
    <a id="1892" class="Comment">--  `recover : ∥ A ∥ → A` does not because typ (B∙ tx) is not definitionally equal to A (though it is</a>
    <a id="1998" class="Comment">--  judegmentally equal to A by cong typ (snd (toEquivPtd tx)) : A ≡ typ (B∙ tx))</a>
    <a id="Recover.obvs2"></a><a id="2084" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2084" class="Function">obvs2</a> <a id="2090" class="Symbol">:</a> <a id="2092" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1033" class="Function">A</a> <a id="2094" class="Symbol">→</a> <a id="2096" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1033" class="Function">A</a>
    <a id="2102" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2084" class="Function">obvs2</a> <a id="2108" class="Symbol">=</a> <a id="2110" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1597" class="Function">recover</a> <a id="2118" href="Cubical.Foundations.Function.html#243" class="Function Operator">∘</a> <a id="2120" href="Cubical.HITs.PropositionalTruncation.Base.html#297" class="InductiveConstructor Operator">∣_∣</a>

    <a id="2129" class="Comment">-- one might wonder if (cong recover (squash ∣ x ∣ ∣ y ∣)) therefore has type x ≡ y, but thankfully</a>
    <a id="2233" class="Comment">--  typ (B∙ (squash ∣ x ∣ ∣ y ∣ i)) is *not* A (it&#39;s a messy hcomp involving h x and h y)</a>
    <a id="Recover.recover-squash"></a><a id="2327" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2327" class="Function">recover-squash</a> <a id="2342" class="Symbol">:</a> <a id="2344" class="Symbol">∀</a> <a id="2346" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2346" class="Bound">x</a> <a id="2348" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2348" class="Bound">y</a> <a id="2350" class="Symbol">→</a> <a id="2352" class="Comment">-- x ≡ y -- this raises an error</a>
                             <a id="2414" href="Agda.Builtin.Cubical.Path.html#190" class="Postulate">PathP</a> <a id="2420" class="Symbol">(λ</a> <a id="2423" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2423" class="Bound">i</a> <a id="2425" class="Symbol">→</a> <a id="2427" href="Cubical.Foundations.Pointed.Base.html#192" class="Function">typ</a> <a id="2431" class="Symbol">(</a><a id="2432" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1255" class="Function">B∙</a> <a id="2435" class="Symbol">(</a><a id="2436" href="Cubical.HITs.PropositionalTruncation.Base.html#315" class="InductiveConstructor">squash</a> <a id="2443" href="Cubical.HITs.PropositionalTruncation.Base.html#297" class="InductiveConstructor Operator">∣</a> <a id="2445" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2346" class="Bound">x</a> <a id="2447" href="Cubical.HITs.PropositionalTruncation.Base.html#297" class="InductiveConstructor Operator">∣</a> <a id="2449" href="Cubical.HITs.PropositionalTruncation.Base.html#297" class="InductiveConstructor Operator">∣</a> <a id="2451" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2348" class="Bound">y</a> <a id="2453" href="Cubical.HITs.PropositionalTruncation.Base.html#297" class="InductiveConstructor Operator">∣</a> <a id="2455" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2423" class="Bound">i</a><a id="2456" class="Symbol">)))</a> <a id="2460" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2346" class="Bound">x</a> <a id="2462" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2348" class="Bound">y</a>
    <a id="2468" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2327" class="Function">recover-squash</a> <a id="2483" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2483" class="Bound">x</a> <a id="2485" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2485" class="Bound">y</a> <a id="2487" class="Symbol">=</a> <a id="2489" href="Cubical.Foundations.Prelude.html#1057" class="Function">cong</a> <a id="2494" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1597" class="Function">recover</a> <a id="2502" class="Symbol">(</a><a id="2503" href="Cubical.HITs.PropositionalTruncation.Base.html#315" class="InductiveConstructor">squash</a> <a id="2510" href="Cubical.HITs.PropositionalTruncation.Base.html#297" class="InductiveConstructor Operator">∣</a> <a id="2512" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2483" class="Bound">x</a> <a id="2514" href="Cubical.HITs.PropositionalTruncation.Base.html#297" class="InductiveConstructor Operator">∣</a> <a id="2516" href="Cubical.HITs.PropositionalTruncation.Base.html#297" class="InductiveConstructor Operator">∣</a> <a id="2518" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2485" class="Bound">y</a> <a id="2520" href="Cubical.HITs.PropositionalTruncation.Base.html#297" class="InductiveConstructor Operator">∣</a><a id="2521" class="Symbol">)</a>


<a id="2525" class="Comment">-- Demo, adapted from:</a>
<a id="2548" class="Comment">-- https://bitbucket.org/nicolaikraus/agda/src/e30d70c72c6af8e62b72eefabcc57623dd921f04/trunc-inverse.lagda</a>

<a id="2657" class="Keyword">private</a>
  <a id="2667" class="Keyword">open</a> <a id="2672" class="Keyword">import</a> <a id="2679" href="Cubical.Data.Nat.html" class="Module">Cubical.Data.Nat</a>
  <a id="2698" class="Keyword">open</a> <a id="2703" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#961" class="Module">Recover</a> <a id="2711" class="Symbol">(</a><a id="2712" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="2714" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2716" href="Agda.Builtin.Nat.html#210" class="InductiveConstructor">zero</a><a id="2720" class="Symbol">)</a> <a id="2722" class="Symbol">(</a><a id="2723" href="Cubical.Foundations.Pointed.Homogeneous.html#3095" class="Function">isHomogeneousDiscrete</a> <a id="2745" href="Cubical.Data.Nat.Properties.html#1517" class="Function">discreteℕ</a><a id="2754" class="Symbol">)</a>

  <a id="2759" class="Comment">-- only `∣hidden∣` is exported, `hidden` is no longer in scope</a>
  <a id="2824" class="Keyword">module</a> <a id="2831" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2831" class="Module">_</a> <a id="2833" class="Keyword">where</a>
    <a id="2843" class="Keyword">private</a>
      <a id="2857" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2857" class="Function">hidden</a> <a id="2864" class="Symbol">:</a> <a id="2866" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
      <a id="2874" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2857" class="Function">hidden</a> <a id="2881" class="Symbol">=</a> <a id="2883" class="Number">17</a>

    <a id="2891" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2891" class="Function">∣hidden∣</a> <a id="2900" class="Symbol">:</a> <a id="2902" href="Cubical.HITs.PropositionalTruncation.Base.html#259" class="Datatype Operator">∥</a> <a id="2904" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="2906" href="Cubical.HITs.PropositionalTruncation.Base.html#259" class="Datatype Operator">∥</a>
    <a id="2912" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2891" class="Function">∣hidden∣</a> <a id="2921" class="Symbol">=</a> <a id="2923" href="Cubical.HITs.PropositionalTruncation.Base.html#297" class="InductiveConstructor Operator">∣</a> <a id="2925" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2857" class="Function">hidden</a> <a id="2932" href="Cubical.HITs.PropositionalTruncation.Base.html#297" class="InductiveConstructor Operator">∣</a>

  <a id="2937" class="Comment">-- we can still recover the value, even though agda can no longer see `hidden`!</a>
  <a id="test"></a><a id="3019" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#3019" class="Function">test</a> <a id="3024" class="Symbol">:</a> <a id="3026" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#1597" class="Function">recover</a> <a id="3034" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#2891" class="Function">∣hidden∣</a> <a id="3043" href="Agda.Builtin.Cubical.Path.html#381" class="Function Operator">≡</a> <a id="3045" class="Number">17</a>
  <a id="3050" href="Cubical.HITs.PropositionalTruncation.MagicTrick.html#3019" class="Function">test</a> <a id="3055" class="Symbol">=</a> <a id="3057" href="Cubical.Foundations.Prelude.html#856" class="Function">refl</a> <a id="3062" class="Comment">-- try it: `C-c C-n recover ∣hidden∣` gives `17`</a>
              <a id="3125" class="Comment">--         `C-c C-n hidden` gives an error</a>

  <a id="3171" class="Comment">-- Finally, note that the definition of recover is independent of the proof that A is homogeneous. Thus we</a>
  <a id="3280" class="Comment">--  still can definitionally recover information hidden by ∣_∣ as long as we permit holes. Try replacing</a>
  <a id="3387" class="Comment">--  `isHomogeneousDiscrete discreteℕ` above with a hole (`?`) and notice that everything still works</a>
</pre></body></html>